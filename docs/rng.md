# RNG

This document describes how seed and RNG works in this game.

## Core implementation

The game uses Alea for RNG instances. Each instance of a `Game` uses a randomly generated seed (or pre-defined seed for replay), so every thing remains deterministic.

## RNG Tree

Each node uses the parent node for RNG instance "seed".

- World
  - Player
    - Unit
      - Unit Instance
    - Card
      - Card Instance
  - Boss
    - Boss Instance
  - Shop
    - Shop Instance

### Description of uses

- `World`
  - Uses a truely random seed or pre-defined seed, and uses this.
  - Creates three new RNG instances from 3 random seeds: `Player`, `Boss`, `Shop`
- `Player`
  - Creates an RNG instance based on a random seed generated by `World`
  - Creates 2 RNG instances: `Unit`, `Card`
- `Unit`
  - Creates an RNG instance based on a random seed generated by `Player`
  - Used to create a `Unit Instance` per round.
- `Unit Instance`
  - Creates an RNG instance based on a random seed generated by `Unit`
  - RNG instance used for chance-based events (i.e. `Dodge` and `Critical`)
  - Also used by cards during each round (as long as the effect is related to in-round.)
- `Card`
  - Creates an RNG instance based on a random seed generated by `Player`.
  - Used to create a `Card Instance`
- `Card Instance`
  - Creates an RNG instance based on a random seed generated by `Card`.
  - Used by cards for determinig card print.
- `Boss`
  - Creates an RNG instance based on a random seed generated by `World`
  - Used to create a `Boss Instance` per round.
- `Boss Intance`
  - Creates an RNG instance based on a random seed generated by `Boss`
  - Behaves similarly for `Player`
  - Also used for determining `Card` set
- `Shop`
  - Creates an RNG instance based on a random seed generated by `World`
  - Used to create a `Shop Instance`
- `Shop Instance`
  - Creates an RNG instance based on a random seed generated by `Shop`
  - Used to create `Card` sequences.